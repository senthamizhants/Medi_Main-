<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<link rel="icon" type="image/png" th:href="@{/images/Mainicons8.png}" />
    <meta charset="UTF-8" />
    <title>Application Status</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #e6f0ff;
            display: flex;
            flex-direction: column;
        }

        form {
            min-height: 100vh;
            background-color: #fff;
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #ccc;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            width: 100%;
            height: 100%;
            box-sizing: border-box;
        }
        
	    .icon-btn {
     		width: 32px;
  			height: 32px;
 			display: flex;
 			margin-top:10px;
 			
 			gap:10px;
  			align-items: center;
  			justify-content: center;
  			border-radius: 50%;
  			border: none;
  			background-color: #40916c;
  			cursor: pointer;
  			font-size: 18px;
  			text-decoration: none;
  			color: #222;
 	 		transition: background-color 0.2s;
  			box-shadow: 0 2px 4px rgba(0,0,0,0.2);
		}

.icon-btn:hover {
  background-color: #367f5d;
}

.menu-buttons {
  position: absolute;
  top: 50%;
  left: 10px;
  transform: translateY(-50%);
  display: flex;
  gap: 10px;
}
			
        

        /* White Button with Black Text */
        .btn-white {
            background-color:#bcd3c6;
            color: #000;
            border: 1px solid #000;
            padding: 5px 12px;
            font-size: 10px;
            font-weight: bold;
            border-radius: 6px;
            cursor: pointer;
            transition: background .3s, color .3s;
        }
        .btn-white:hover {
            background-color: #367f5d;
            color: #fff;
        }

        .status-badge {
    width: 17px;       /* Smaller width */
    height: 17px;      /* Fixed height */
    display: inline-block;
    border-radius: 3px; /* Slightly rounded square (or 0 for sharp square) */
    margin-left: 10px;
    background-color: #e74c3c;
    transition: background-color .4s ease, box-shadow .4s ease;
}
        .status-badge.connected { background-color: #23c26d; }
        .status-badge.disconnected { background-color: #e74c3c; }

        table {
            width: 60%;
            margin: 20px auto;
            border-collapse: collapse;
        }
        table th, table td {
            text-align: center;
            padding: 5px;
            border: 1px solid #a3c9a8;
            font-size:12px;
            
        }
        table th {
            background-color: #8fb9a8;
            font-size: 13px;
            padding: 12px;
        }

        .page-title {
            display: inline-block;
            background-color: #40916c;
            color: white;
            width:78%;
            padding: 6px 50px;
            border-radius: 6px;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .page-title-container {
            text-align: center;
            margin-bottom: 10px;
            position: relative;
        }
        table tbody tr:hover {
    background-color: #f5f5f5;
    transition: background 0.3s;
}
 .back-button-container {
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div class="container">

    <form id="applicationstatus" onsubmit="return false;">
		<div class="page-title-container">
    <!-- Buttons aligned left -->
    <div class="menu-buttons">
        <!-- Home Button -->
        <a th:href="@{/home}" class="icon-btn" title="Home">
            <img th:src="@{/images/home.png}" alt="Home" width="20" height="20">
        </a>

        <!-- Back Button -->
        <button type="button" class="icon-btn" onclick="history.back()" title="Back">
            <img th:src="@{/images/backButton.png}" alt="Back" width="20" height="20">
        </button>
    </div>

    <!-- Title centered -->
    <h2 class="page-title">Application Status</h2>
</div>
			 

				 <!-- Table -->
			<table id="statusTable">
			 <thead>

        <tr>

        	<th>Machine ID</th>            

            <th>Machine Name</th>

            <th>PORT</th>

             <th>Protocol Type</th>

            <th>Active</th>

            <th>Status</th>

        </tr>

    </thead>

    <tbody>

        <tr th:each="machine : ${machines}">

        <td th:text="${machine.machineId}"></td>

            <td th:text="${machine.machineName}"></td>

            <td th:text="${machine.port}"></td>

                <td th:text="${machine.protocolType}"></td>

            <td>

                <button type="button" class="btn-white" onclick="toggleConnection(this)">Connect</button>

            </td>

            <td>

                <span class="status-badge disconnected"></span>

            </td>

        </tr>

    </tbody>

</table>



        <!-- Back Button 

        <div class="back-button-container">

            <button type="button" class="btn-white" onclick="goBack()">Back</button>

        </div>-->

    </form>

</div>
<script>
function toggleConnection(button) {
    const statusBadge = button.parentElement.nextElementSibling.querySelector('.status-badge');
    const isConnected = statusBadge.classList.contains('connected');

    if (isConnected) {
        statusBadge.classList.remove('connected');
        statusBadge.classList.add('disconnected');
        button.textContent = 'Connect';
    } else {
        statusBadge.classList.add('connected');
        statusBadge.classList.remove('disconnected');
        button.textContent = 'Disconnect';
    }
}
function goBack() {
    window.location.href = "/home";  // Change this to your home page URL
}
</script>
</body>
</html>
